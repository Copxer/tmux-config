# --- Terminal settings: enable 256 colors and true color support
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:Tc"

# --- Start window and pane numbering at 1 (instead of 0)
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1

# --- Automatically renumber windows when one is closed
set-option -g renumber-windows on

# --- Change default prefix to Ctrl+Space for better ergonomics on macOS
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# -------------------------------------
# --- Pane Navigation (Vim-style) ---
# -------------------------------------
# Use Alt (Option) + h/j/k/l to move between panes without prefix
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# -------------------------------------
# --- Window Navigation ---
# -------------------------------------
# Use Alt + Left/Right Arrow to switch windows
bind -n M-Left previous-window
bind -n M-Right next-window

# -------------------------------------
# --- ESC delay fix for Vim/tmux ---
# -------------------------------------
# Eliminate delay in recognizing fast key combos
set -s escape-time 0

# -------------------------------------
# --- Enable mouse support ---
# -------------------------------------
# Click to switch/select panes, scroll, and resize
set -g mouse on

# -------------------------------------
# --- Pane Splitting ---
# -------------------------------------

# Use Alt + "\" to split horizontally
bind -n "M-\\" split-window -h -c "#{pane_current_path}"

# Use Alt + "-" to split vertically
bind -n "M--" split-window -v -c "#{pane_current_path}"

# Optional fallback Shift-based bindings with prefix (if desired)
bind "|" split-window -hc "#{pane_current_path}"
bind "-" split-window -vc "#{pane_current_path}"
bind "\\" split-window -fh -c "#{pane_current_path}"
bind "_" split-window -fv -c "#{pane_current_path}"

# -------------------------------------
# --- Pane Resizing with Alt + Shift + h/j/k/l ---
# -------------------------------------
# Resize current pane using Alt + Shift + direction key
bind -n M-H resize-pane -L 5
bind -n M-L resize-pane -R 5
bind -n M-K resize-pane -U 5
bind -n M-J resize-pane -D 5

# -------------------------------------
# --- Reload Tmux Config ---
# -------------------------------------
# Press Prefix (Ctrl+Space) + r to reload tmux config
bind r source-file ~/.tmux.conf \; display-message "Tmux config reloaded!"

# -----------------------------------------------------------
# --- Powerline-style status bar (requires Nerd Font) -------
# -----------------------------------------------------------

# Refresh every 2 seconds
set -g status-interval 2
set -g status-justify centre
set -g status-style bg=default,fg=white

# Left: session name with Powerline styling
set -g status-left '#[bg=blue,fg=black]#[bg=blue,fg=white,bold] #S #[bg=default,fg=blue]'

# Right: Git branch, date, time, host — styled
set -g status-right '#[bg=default,fg=green]#[bg=green,fg=black] #(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null || echo "no-git") #[fg=black] %Y-%m-%d  %H:%M #[bg=blue,fg=green]#[bg=blue,fg=black] #H #[default]'

# Active window styling with Powerline block
setw -g window-status-current-format '#[bg=blue,fg=black]#[bg=blue,fg=white,bold] #I:#W #[bg=default,fg=blue]'

# Inactive window styling
setw -g window-status-format ' #[fg=white]#I:#W '
setw -g window-status-style bg=default,fg=white

# Pane borders
set -g pane-border-style fg=white
set -g pane-active-border-style fg=green

