# --- Terminal settings: enable 256 colors and true color support
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:Tc"

# --- Start window and pane numbering at 1 (instead of 0)
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1

# --- Automatically renumber windows when one is closed
set-option -g renumber-windows on

# --- Change default prefix to Ctrl+Space for better ergonomics on macOS
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# --- Pane Navigation (Vim-style)
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# --- Window Navigation
bind -n M-Left previous-window
bind -n M-Right next-window

# --- ESC delay fix for Vim/tmux
set -s escape-time 0

# --- Enable mouse support
set -g mouse on

# --- Pane Splitting
bind -n "M-\\" split-window -h -c "#{pane_current_path}"
bind -n "M--" split-window -v -c "#{pane_current_path}"
bind "|" split-window -hc "#{pane_current_path}"
bind "-" split-window -vc "#{pane_current_path}"
bind "\\" split-window -fh -c "#{pane_current_path}"
bind "_" split-window -fv -c "#{pane_current_path}"

# --- Pane Resizing
bind -n M-H resize-pane -L 5
bind -n M-L resize-pane -R 5
bind -n M-K resize-pane -U 5
bind -n M-J resize-pane -D 5

# --- Reload Tmux Config
bind r source-file ~/.tmux.conf \; display-message "Tmux config reloaded!"

# -----------------------------------------------------------
# --- Catppuccin Macchiato-style status bar (Nerd Font) -----
# -----------------------------------------------------------

# Base tmux status bar style
set -g status-interval 1
set -g status-justify left
set -g status-style bg=#24273a,fg=#cad3f5

# --- Left: Session and simulated center "active window" ---
set -g status-left-length 100
set -g status-left '#[fg=#24273a,bg=#8aadf4]#[fg=#24273a,bg=#8aadf4,bold] #S #[fg=#8aadf4,bg=#363a4f]#[fg=#cad3f5,bg=#363a4f]         #W         #[fg=#363a4f,bg=#24273a,nobold]'

# --- Right: Git branch, time (12h), date, hostname ---
set -g status-right-length 150
set -g status-right '#[fg=#363a4f,bg=#24273a]#[fg=#cba6f7,bg=#363a4f] #(cd #{pane_current_path} && git rev-parse --abbrev-ref HEAD 2>/dev/null | sed "s/^/ /") #[fg=#8aadf4,bg=#363a4f]#[fg=#24273a,bg=#8aadf4] %I:%M:%S %p #[fg=#ed8796,bg=#8aadf4]#[fg=#24273a,bg=#ed8796] %d-%b-%y #[fg=#ed8796,bg=#24273a]#[fg=#ffffff] #H '
# Window tabs
setw -g window-status-format ' #[fg=#a5adcb]#I:#W '
setw -g window-status-current-format '#[bg=#8aadf4,fg=black]#[bg=#8aadf4,fg=white,bold] #I:#W #[bg=default,fg=#8aadf4]'
setw -g window-status-style bg=default,fg=#a5adcb

# Pane borders
set -g pane-border-style fg=#6e738d
set -g pane-active-border-style fg=#8aadf4

# Toggle status bar
bind b set-option status \; display-message "Status Bar: #{?status,on,off}"
